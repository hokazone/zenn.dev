---
title: "Apache Solrå…¥é–€ã‚’Dockerä¸Šã§è¡Œã†"
emoji: "ğŸ§™â€â™‚ï¸"
type: "tech"
topics:
  - "docker"
  - "apache"
  - "ç’°å¢ƒæ§‹ç¯‰"
  - "solr"
published: true
published_at: "2023-08-24 18:57"
---

# ã¯ã˜ã‚ã«
æ¥­å‹™ã§Apache Solrã‚’ä½¿ç”¨ã™ã‚‹æ©Ÿä¼šãŒã‚ã‚Šã¾ã—ãŸã€‚
ã¾ãšã¯[Apache Solrå…¥é–€](https://amzn.asia/d/hJRISUe)ã§ã‚ã‚‹ç¨‹åº¦åŸºæœ¬ã«ãªã‚Œã‚ˆã†ã¨æ€ã£ãŸã®ã§ã™ãŒã€ç’°å¢ƒãŒM2 Macã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€ã†ã¾ãç’°å¢ƒæ§‹ç¯‰ã§ããªã‹ã£ãŸã®ã§ã€Dockerä¸Šã§æ§‹ç¯‰ã™ã‚‹ã“ã¨ã¨ã—ã¾ã—ãŸã€‚

# ç’°å¢ƒæ§‹ç¯‰
æ›¸ç±ã¨åŒã˜ã‚ˆã†ã«Solr6.3.0ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```Dockerfile:Dockerfile
FROM solr:6.3.0

USER root

RUN echo "deb http://archive.debian.org/debian/ stretch main" > /etc/apt/sources.list \
    && echo "deb http://archive.debian.org/debian-security stretch/updates main" >> /etc/apt/sources.list

# apt-keyã®è¨­å®š
RUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 54404762BBB6E853 \
    && apt-key adv --keyserver keyserver.ubuntu.com --recv-keys BDE6D2B9216EC7A8

RUN apt-get upgrade -y \
    && apt-get update \
    && apt-get install -y git vim gcc make libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev \
    && git clone https://github.com/git/git /opt/git \
    && cd /opt/git/ \
    && make all \
    && make prefix=/usr/local install \
    && /usr/local/bin/git clone https://github.com/solrbook3/examples /opt/example_book
```

```yml:docker-compose.yml
version: "3"
services:
  solr:
    user: solr
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8983:8983"
    volumes:
      - ./data:/opt/solr/server/solr/mycore
    environment:
      TZ: "Asia/Tokyo"
```

ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã§ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚Œã°å®Œäº†ã§ã™ã€‚
```sh:zsh
$ docker-compose build
$ docker-compose up
```
`localhost:8983`ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããŸã‚‰ã€æ­£ã—ãå‹•ã„ã¦ã„ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/420b487e33b1-20230824.png)

ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼
(Solrã§ã¯ãªãElasticSearchã®æ–¹ãŒã„ã„ã¨æ€ã„ã¾ã™ï¼ï¼ãƒã‚¸ã§...)
